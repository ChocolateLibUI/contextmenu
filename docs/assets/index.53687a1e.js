var ye=Object.defineProperty;var Ee=(n,t,e)=>t in n?ye(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>(Ee(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class Ce{constructor(t,e,i){c(this,"type");c(this,"target");c(this,"data");this.type=t,this.target=e,this.data=i}}class ae{constructor(){c(this,"target");c(this,"eventHandler_ListenerStorage",{})}on(t,e){let i=this.eventHandler_ListenerStorage[t];return i?i.indexOf(e)==-1?i.push(e):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[t]=[e],e}once(t,e){return this.on(t,function(i){return e(i),!0}),e}off(t,e){let i=this.eventHandler_ListenerStorage[t];if(i){let s=i.indexOf(e);s!=-1?i.splice(s,1):console.warn("Listener not in handler")}return e}emit(t,e){let i=this.eventHandler_ListenerStorage[t];if(i&&i.length>0){let s=Object.freeze(new Ce(t,this.target||this,e));i.length>1&&(i=[...i]);for(let o=0,r=i.length;o<r;o++)try{i[o](s)&&(i.splice(o,1),r--,o--)}catch(h){console.warn("Failed while dispatching event",h)}}}clear(t){this.eventHandler_ListenerStorage[t]=[]}inUse(t){var e;return Boolean((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)}has(t,e){var i;return Boolean(((i=this.eventHandler_ListenerStorage[t])==null?void 0:i.indexOf(e))!==-1)}amount(t){var e;return((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)||0}get eventsUserOnly(){return this}}let P=new ae,$=P.eventsUserOnly,y=[document],R=document;P.target={documents:y,mainDocument:R};let f=n=>{for(let t=0;t<y.length;t++)n(y[t])},Te=(n,t)=>{if(y.includes(n))console.warn("Document registered twice");else{if(y.push(n),t){let e=R.head.children;for(let i=0;i<e.length;i++)switch(e[i].nodeName){case"LINK":if(e[i].rel!=="stylesheet")break;case"STYLE":n.head.appendChild(e[i].cloneNode(!0));break}}P.emit("documentAdded",n)}},Se=n=>{let t=y.indexOf(n);t!=-1?(y.splice(t,1),P.emit("documentRemoved",n)):console.warn("Document not registered")};let ie=(n,t)=>{var i;let e=new TextEncoder().encode(n);return n=new TextDecoder().decode(e.slice(0,t)),((i=n.at(-1))==null?void 0:i.charCodeAt(0))===65533?n.slice(0,-1):n};class B{constructor(t){c(this,"___valueListeners",[]);c(this,"___value");c(this,"info");this.___value=t}addListener(t,e){if(this.___valueListeners.push(t),e){let i=this.get;i instanceof Promise?i.then(t):t(i)}return t}removeListener(t){let e=this.___valueListeners.indexOf(t);return e!=-1&&this.___valueListeners.splice(e,1),t}get get(){return this.___value}set set(t){this.___value!==t&&(this.___value=t,this.___update())}___update(){if(this.___valueListeners)for(let t=0,e=this.___valueListeners.length;t<e;t++)try{this.___valueListeners[t](this.___value)}catch(i){console.warn("Failed while calling value listeners ",i)}}compare(t){let e=this.get;return e instanceof Promise?e.then(i=>t!==i):t!==e}get inUse(){return this.___valueListeners.length!==0}hasListener(t){return this.___valueListeners.indexOf(t)!==-1}toJSON(){return this.___value}}class le extends B{constructor(e,i){super(e);c(this,"___limiters");c(this,"___limitersListeners",[]);this.___limiters=i}addLimiterListener(e,i){return this.___limitersListeners.push(e),i&&e(this),e}removeLimiterListener(e){let i=this.___limitersListeners.indexOf(e);return i!=-1&&this.___limitersListeners.splice(i,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,i=this.___limitersListeners.length;e<i;e++)try{this.___limitersListeners[e](this)}catch(s){console.warn("Failed while calling value listeners ",s)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let i=0;i<this.___limiters.length;i++)if(this.___limiters[i].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters)for(let i=0;i<this.___limiters.length;i++){let s=this.___limiters[i];if(s.func(e))if(s.correction)switch(typeof s.reason){case"string":return{allowed:!1,reason:s.reason,correction:s.correction(e)};case"function":return{allowed:!1,reason:s.reason(e),correction:s.correction(e)}}else switch(typeof s.reason){case"string":return{allowed:!1,reason:s.reason};case"function":return{allowed:!1,reason:s.reason(e)}}}return{allowed:!0,reason:""}}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class q extends le{constructor(e,i=-1/0,s=1/0,o,r){super(e,r);c(this,"_min");c(this,"_max");c(this,"_step");c(this,"halfStep",0);this._min=i,this._max=s,o&&(this._step=o,this.halfStep=o/2)}get min(){return this._min}set min(e){this._min=e;let i=Math.max(this._min,this.___value);this.___value!==i&&(this.___value=i,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let i=Math.min(this._max,this.___value);this.___value!==i&&(this.___value=i,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this.halfStep=e/2;let i=this.___value%this._step,s=i>this.halfStep?this.___value+(this._step-i):this.___value-i;s!==this.___value&&(this.___value=s,this.___update())}else delete this._step,this.halfStep=0;this.___updateLimiter()}set set(e){if(this._step){let i=e%this._step;e=i>this.halfStep?e+(this._step-i):e-i}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}}class A extends le{constructor(e,i,s,o,r){super(e,r);c(this,"_maxLength");c(this,"_maxByteLength");c(this,"___enums");this._maxLength=s,this._maxByteLength=o,this.___enums=i}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const i in this.___enums){this.___value=i,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let i=ie(this.___value,this._maxByteLength);this.___value!==i&&(this.___value=i,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=ie(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}}var Fe=Object.defineProperty,ke=(n,t,e)=>t in n?Fe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,b=(n,t,e)=>(ke(n,typeof t!="symbol"?t+"":t,e),e),L=(n=>(n.write="w",n.read="r",n.none="n",n))(L||{});const De={w:{name:"Write",description:"Write access to element"},r:{name:"Read",description:"Read access to element"},n:{name:"None",description:"No access to element"}};class $e extends A{constructor(t){super(t,De)}}class H extends HTMLElement{constructor(...t){super(),b(this,"$connectedObserver"),b(this,"isVisible",!1),b(this,"events",new ae),b(this,"$values"),b(this,"$valueFuncs"),b(this,"$valueConnector"),b(this,"$access",L.write),b(this,"$accessListener"),this.events.target=this}static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-core"}connectedCallback(){this.$connectedObserver?this.$connectedObserver.observe(this):(this.events.emit("connect",0),this.isVisible=!0)}disconnectedCallback(){this.$connectedObserver?(this.$connectedObserver.unobserve(this),this.isVisible&&(this.events.emit("connect",1),this.isVisible=!1)):(this.events.emit("connect",1),this.isVisible=!1)}adoptedCallback(){this.events.emit("connect",2)}options(t){return this.access=t.access,this}attachToObserver(t){t?(this.$connectedObserver=t,this.isConnected&&t.observe(this)):this.$connectedObserver&&(this.isConnected&&this.$connectedObserver.unobserve(this),this.isVisible||(this.events.emit("connect",0),this.isVisible=!0),delete this.$connectedObserver)}attachValue(t,e){if(this.$valueFuncs){if(this.$valueFuncs.includes(e))throw"Function is already attached to this element"}else this.$values=[],this.$valueFuncs=[];return this.$valueConnector?this.isVisible&&t.addListener(e):this.$valueConnector=this.events.on("connect",i=>{switch(i.data){case 0:for(let s=0;s<this.$values.length;s++)this.$values[s].addListener(this.$valueFuncs[s],!0);break;case 1:for(let s=0;s<this.$values.length;s++)this.$values[s].removeListener(this.$valueFuncs[s]);break;case 2:for(let s=0;s<this.$values.length;s++)this.$values[s].removeListener(this.$valueFuncs[s]),this.$values[s].addListener(this.$valueFuncs[s],!0)}}),this.$valueFuncs.push(e),this.$values.push(t),e}dettachValue(t){if(this.$valueFuncs){let e=this.$valueFuncs.indexOf(t);e>-1&&(this.isVisible&&this.$values[e].removeListener(t),this.$values.splice(e,1),this.$valueFuncs.splice(e,1),this.$valueFuncs.length===0&&this.events.off("connect",this.$valueConnector))}}get access(){return this.$access}set access(t){this.$accessListener&&(this.dettachValue(this.$accessListener),delete this.$accessListener),typeof t=="object"&&t instanceof $e?this.$accessListener=this.attachValue(t,e=>{this.$accessChange(e),this.$access=e}):t?(this.$accessChange(t),this.$access=t):(this.$accessChange(L.write),this.$access=L.write)}$accessChange(t){switch(t){case L.write:this.inert=!1;break;case L.read:this.inert=!0;break;case L.none:this.setAttribute("inert","none");break}}}const Oe=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var Ne=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;let Me=n=>n?/[A-Z]/.test(n)?"Custom element names must not contain uppercase ASCII characters.":n.includes("-")?/^\d/i.test(n)?"Custom element names must not start with a digit.":/^-/i.test(n)?"Custom element names must not start with a hyphen.":Ne.test(n)?Oe.has(n)?`The supplied element name is reserved and can't be used.
See: https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name`:"Unknown fault":"Invalid element name.":"Custom element names must contain a hyphen. Example: unicorn-cake":"Missing element name.",E=n=>{let t=n.elementNameSpace(),e=n.elementName,i="",s=n;for(;s!==HTMLElement&&t===s.elementNameSpace();){let o=s.elementName();if(s=Object.getPrototypeOf(s),e===s.elementName)throw new Error("Element uses same name as ancestor, abstract classes should return '@abstract@'");if(!o.length)throw new Error("Element doesn't define element name");o!=="@abstract@"&&(i="-"+o+i)}i=t+i;try{customElements.define(i,n)}catch(o){throw o.message.includes("has already been used with this registry")?o:new Error(Me(i)+" "+i)}},Be="99999999";class U extends H{constructor(){super();c(this,"activeElementBuffer");this.tabIndex=-1;let e=i=>{i.preventDefault(),i.stopPropagation()};this.oncontextmenu=e,this.onpointerdown=e,this.onpointerup=e,this.onpointercancel=e,this.onpointerenter=e,this.onpointerleave=e,this.onpointermove=e,this.onpointerout=e,this.onpointerout=e,this.onclick=e,this.style.zIndex=Be}static elementName(){return"container"}static elementNameSpace(){return"chocolatelibui-contextmenu"}attachMenu(e){return this.activeElementBuffer=this.ownerDocument.activeElement,this.replaceChildren(e),e}closeUp(e){this.activeElementBuffer?(this.activeElementBuffer.focus(),this.ownerDocument.activeElement!==this.activeElementBuffer&&this.focus(),this.activeElementBuffer=void 0):this.focus(),this.removeChild(e)}}E(U);$.on("documentAdded",n=>{n.data["@chocolatelibui/contextmenu"]=n.data.documentElement.appendChild(new U)});f(n=>{n["@chocolatelibui/contextmenu"]=n.documentElement.appendChild(new U)});let se={50:"#E3F2FD",100:"#BBDEFB",200:"#90CAF9",300:"#64B5F6",400:"#42A5F5",500:"#2196F3",600:"#1E88E5",700:"#1976D2",800:"#1565C0",900:"#0D47A1"},w={50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",900:"#212121"};var Ae=Object.defineProperty,Ie=(n,t,e)=>t in n?Ae(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,T=(n,t,e)=>(Ie(n,typeof t!="symbol"?t+"":t,e),e);let oe={},Pe=(n,t,e)=>(oe[n]=new J(n,t,e),oe[n]);class J{constructor(t,e,i){T(this,"pathID"),T(this,"settings",{}),T(this,"subGroups",{}),T(this,"name"),T(this,"description"),this.pathID=t,this.name=e,this.description=i}makeSubGroup(t,e,i){if(t in this.subGroups){console.warn("Sub group already registered "+t);return}else return this.subGroups[t]=new J(this.pathID+"/"+t,e,i)}makeBooleanSetting(t,e,i,s){if(t in this.settings)throw new Error("Settings already registered "+t);let o=localStorage[this.pathID+"/"+t];if(o)var r=new B(JSON.parse(o));else if(typeof s=="boolean")var r=new B(s);else{var r=new B(!1);s.then(d=>{r.set=d})}return r.info={name:e,description:i},r.addListener(h=>{localStorage[this.pathID+"/"+t]=JSON.stringify(h)},!o),this.settings[t]=r}makeNumberSetting(t,e,i,s,o,r,h,d){if(t in this.settings)throw new Error("Settings already registered "+t);let l=localStorage[this.pathID+"/"+t];if(l)var u=new q(JSON.parse(l),o,r,h,d);else if(typeof s=="number")var u=new q(s,o,r,h,d);else{var u=new q(NaN,o,r,h,d);s.then(Y=>{u.set=Y})}return u.info={name:e,description:i},u.addListener(m=>{localStorage[this.pathID+"/"+t]=JSON.stringify(m)},!l),this.settings[t]=u}makeStringSetting(t,e,i,s,o,r,h,d){if(t in this.settings)throw new Error("Settings already registered "+t);let l=localStorage[this.pathID+"/"+t];if(l)var u=new A(JSON.parse(l),o,r,h,d);else if(typeof s=="string")var u=new A(s,o,r,h,d);else{var u=new A("",o,r,h,d);s.then(Y=>{u.set=Y})}return u.info={name:e,description:i},u.addListener(m=>{localStorage[this.pathID+"/"+t]=JSON.stringify(m)},!l),this.settings[t]=u}}var He=Object.defineProperty,Ue=(n,t,e)=>t in n?He(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,S=(n,t,e)=>(Ue(n,typeof t!="symbol"?t+"":t,e),e);const Ve="@chocolatelibui/theme";let O=Pe(Ve,"Theme/UI","Settings for UI elements and and color themes"),I={},Ye={light:{name:"Light",description:"Don't set touch mode automatically"},dark:{name:"Dark",description:"Change touch mode on first ui interaction"}},C=O.makeStringSetting("theme","Theme","Color theme of UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Ye),qe=O.makeBooleanSetting("autoTheme","Automatic Theme Change","Toggle for automatically changing theme",!0),ce=(n,t,e)=>(I[n]=new K(n,t,e),I[n]);class K{constructor(t,e,i){S(this,"pathID"),S(this,"variables",{}),S(this,"subGroups",{}),S(this,"name"),S(this,"description"),this.pathID=t,this.name=e,this.description=i}makeSubGroup(t,e,i){if(t in this.subGroups)throw new Error("Sub group already registered "+t);return this.subGroups[t]=new K(this.pathID+"/"+t,e,i)}makeVariable(t,e,i,s,o,r,h){if(t in this.variables)throw new Error("Settings already registered "+t);let d="--"+this.pathID+"/"+t,l=this.variables[d]={name:e,desc:i,vars:{light:s,dark:o}};f(u=>{u.documentElement.style.setProperty(d,l.vars[C.get])})}applyThemes(t,e){for(const i in this.variables)t.setProperty(i,this.variables[i].vars[e]);for(const i in this.subGroups)this.subGroups[i].applyThemes(t,e)}}let Q=(n,t)=>{for(const e in I)I[e].applyThemes(n.documentElement.style,t)};C.addListener(n=>{f(t=>{Q(t,n)})});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{qe.get&&(C.set=n.matches?"dark":"light")});$.on("documentAdded",n=>{Q(n.data,C.get)});f(n=>{Q(n,C.get)});let Ge={off:{name:"Off",description:"Don't set touch mode automatically"},first:{name:"First Interaction",description:"Change touch mode on first ui interaction"},every:{name:"Every Interaction",description:"Change touch mode on every ui interaction"}},k=O.makeBooleanSetting("touch","Touch Mode","Toggle between touch friendly or mouse friendly UI",!1),j=O.makeStringSetting("autoTouch","Automatic Touch Mode","Mode for automatically changing touch mode","every",Ge);k.addListener(n=>{f(t=>{Z(t,n)})});j.addListener(n=>{f(t=>{X(t,n)})});let Z=(n,t)=>{t?n.documentElement.classList.add("touch"):n.documentElement.classList.remove("touch")},G=n=>{switch(n.pointerType){case"touch":k.set=!0;break;case"mouse":case"pen":default:k.set=!1;break}},z=n=>{G(n),f(t=>{t.documentElement.removeEventListener("pointerdown",z,{capture:!0})})},X=(n,t)=>{switch(n.documentElement.removeEventListener("pointerdown",z,{capture:!0}),n.documentElement.removeEventListener("pointerdown",G,{capture:!0}),t){case"first":n.documentElement.addEventListener("pointerdown",z,{capture:!0});break;case"every":n.documentElement.addEventListener("pointerdown",G,{capture:!0});break}};$.on("documentAdded",n=>{Z(n.data,k.get),X(n.data,j.get)});f(n=>{Z(n,k.get),X(n,j.get)});let he=O.makeNumberSetting("scale","UI Scale","The scale of the UI",1,.2,4),D=he.get*16;he.addListener(n=>{D=n*16,f(t=>{t.documentElement.style.fontSize=D+"px"})});$.on("documentAdded",n=>{n.data.documentElement.style.fontSize=D+"px"});f(n=>{n.documentElement.style.fontSize=D+"px"});let ze=n=>n*D;const We="@chocolatelibui/contextmenu";let N=ce(We,"Context Menu","Right click or touch and hold context menu appearance");N.makeVariable("background","Background Color","Color of background",w[50],w[900],"Color",void 0);N.makeVariable("text","Text Color","Color of text",w[600],w[400],"Color",void 0);N.makeVariable("hover","Hover Color","Background color of line when hovering over it",se[200],se[900],"Color",void 0);N.makeVariable("hoverText","Text Color","Standard text color",w[900],w[50],"Color",void 0);N.makeVariable("border","Border Color","Color of border and deviders",w[300],w[800],"Color",void 0);let ee=(n,t)=>{let e;return function(){return e||(e=new DOMParser().parseFromString(t,"image/svg+xml").firstChild,e.setAttribute("icon",n)),e.cloneNode(!0)}},v=ee("material_content_text_format_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"/></svg>'),Re=ee("material_navigation_chevron_right_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"/></svg>'),Je=ee("material_navigation_close_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>');class M extends H{static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-contextmenu"}focusNext(t){var e,i,s,o;t?this.previousElementSibling?this.previousElementSibling.focus({}):((e=this.parentElement)==null?void 0:e.lastElementChild)!==this&&((i=this.parentElement)==null?void 0:i.lastElementChild).focus({}):this.nextElementSibling?this.nextElementSibling.focus():((s=this.parentElement)==null?void 0:s.firstElementChild)!==this&&((o=this.parentElement)==null?void 0:o.firstElementChild).focus()}}class a extends M{constructor(e,i,s,o,r){super();c(this,"func");this.func=i,this.tabIndex=0;let h=this.appendChild(document.createElement("div"));h.className="icon",s&&h.appendChild(s);let d=this.appendChild(document.createElement("div"));d.innerHTML=e,d.className="text";let l=this.appendChild(document.createElement("div"));o&&(l.innerHTML=o),l.className="shortcut";let u=this.appendChild(document.createElement("div"));r&&(u.innerHTML="\u2713"),u.className="checkmark",this.onclick=m=>{m.stopPropagation(),this.func(),navigator==null||navigator.vibrate(25),this.parentElement.closeUp()},this.onkeydown=m=>{switch(m.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(m.shiftKey||m.code==="ArrowUp");break;case"Enter":case"Space":this.func(),this.parentElement.closeUp();break;case"ArrowLeft":case"Escape":return}m.preventDefault(),m.stopPropagation()}}static elementName(){return"option"}}E(a);let Ke="http://www.w3.org/2000/svg",_=(n,t,e)=>{let i=document.createElementNS(Ke,"circle");return i.setAttribute("cx",String(n)),i.setAttribute("cy",String(t)),i.setAttribute("r",String(e)),i};const Qe="@chocolatelibui/spinner";let je=ce(Qe,"Spinner","Spinner used as a placeholder for data with and unknown arrival time");je.makeVariable("color","Dot color","Color of dots in spinner",w[700],w[300],"Color",void 0);let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 64 64");p.appendChild(_(32,6,0));p.appendChild(_(45,9.483,0));p.appendChild(_(54.516,19,0));p.appendChild(_(58,32,0));p.appendChild(_(54.516,45,0));p.appendChild(_(45,54.516,0));p.appendChild(_(32,58,0));p.appendChild(_(19,54.516,0));p.appendChild(_(9.483,45,0));p.appendChild(_(6,32,0));p.appendChild(_(9.483,19,0));p.appendChild(_(19,9.483,0));class ue extends H{static elementName(){return"dots"}static elementNameSpace(){return"chocolatelibui-spinner"}constructor(){super(),this.appendChild(p.cloneNode(!0))}}E(ue);class de extends M{static elementName(){return"buffer"}constructor(){super(),this.appendChild(new ue)}focus(t){this.focusNext(t)}}E(de);class x extends M{constructor(e,i,s){super();c(this,"menu");c(this,"isOpen");c(this,"hoverTime");c(this,"blockTime");this.menu=new te(i),this.tabIndex=0;let o=this.appendChild(document.createElement("div"));o.className="icon",s&&o.appendChild(s);let r=this.appendChild(document.createElement("div"));r.innerHTML=e,r.className="text";let h=this.appendChild(document.createElement("div"));h.className="shortcut";let d=this.appendChild(document.createElement("div"));d.appendChild(Re()),d.className="chevron",this.onclick=l=>{l.stopPropagation(),this.blockTime||(navigator==null||navigator.vibrate(25),this.isOpen?this.closeDown():this.open())},this.onpointerenter=l=>{l.pointerType!=="touch"&&!this.isOpen&&(this.hoverTime=setTimeout(()=>{this.open(),this.blockTime=setTimeout(()=>{this.blockTime=0},500)},300))},this.onpointerleave=()=>{clearTimeout(this.hoverTime)},this.onkeydown=l=>{switch(l.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(l.shiftKey||l.code==="ArrowUp");break;case"ArrowRight":case"Enter":case"Space":this.open(),this.menu.focusNext(!1);break;case"ArrowLeft":case"Escape":return}l.preventDefault(),l.stopPropagation()}}static elementName(){return"submenu"}open(){this.parentElement.submenu&&this.parentElement.submenu.closeDown(),this.parentElement.submenu=this,this.appendChild(this.menu),this.menu.setPosition(0,0,this),this.isOpen=!0}close(){this.focus(),this.parentElement.submenu=void 0,this.removeChild(this.menu),this.isOpen=!1}closeDown(){this.menu.closeDown(),this.close()}closeUp(){this.close(),this.parentElement.closeUp()}}E(x);class te extends H{constructor(e){super();c(this,"submenu");c(this,"closer");c(this,"x");c(this,"y");c(this,"element");let i=typeof e=="function"?e():e;if(i instanceof Promise){let s=this.appendChild(new de);i.then(o=>{s.remove(),this.lines=o,this.setPosition(this.x,this.y,this.element)})}else this.lines=i;this.tabIndex=0,this.onblur=s=>{s.preventDefault(),s.stopPropagation(),s.relatedTarget||this.closeUp()},this.onscroll=()=>{this.closeDown()},this.onkeydown=s=>{switch(s.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(s.shiftKey||s.code==="ArrowUp");break;case"ArrowLeft":this.parentElement instanceof U||(this.parentElement.focus(),this.parentElement.closeDown());break;case"Escape":this.closeUp();break}s.preventDefault(),s.stopPropagation()}}static elementName(){return"menu"}static elementNameSpace(){return"chocolatelibui-contextmenu"}set lines(e){this.replaceChildren(),this.closer&&this.appendChild(this.closer);for(let i=0;i<e.length;i++){let s=e[i],o=typeof s=="function"?s():s;this.appendChild(o)}}focusNext(e){var i,s;e?(i=this.lastChild)==null||i.focus():(s=this.firstChild)==null||s.focus({})}get fullscreen(){return Boolean(this.closer)}set fullscreen(e){e?(this.classList.add("fullscreen"),this.closer||(this.closer=new a("Close",()=>{},Je()),this.closer.onclick=i=>{i.stopPropagation(),this.parentElement instanceof x?this.parentElement.closeDown():this.closeUp()},this.prepend(this.closer))):(this.classList.remove("fullscreen"),this.closer&&(this.closer.remove(),delete this.closer))}closeDown(){this.submenu&&this.submenu.closeDown(),this.submenu=void 0}closeUp(){this.closeDown(),this.parentElement.closeUp(this)}setPosition(e=0,i=0,s){this.x=e,this.y=i,this.element=s;let o=this.getBoundingClientRect(),r=this.ownerDocument.defaultView,h=NaN,d=NaN,l=NaN,u=NaN;if(r){if(s){var m=s.getBoundingClientRect();m.x+m.width+o.width>r.innerWidth?(e=m.x,o.width<e?u=r.innerWidth-e:u=r.innerWidth-(m.x+m.width)):e=m.x+m.width,i=m.y+m.height,i+o.height>=r.innerHeight?i>=o.height?d=r.innerHeight-m.y:h=r.innerHeight-o.height:h=i}else i+o.height>=r.innerHeight?i>=o.height?d=r.innerHeight-i:h=r.innerHeight-o.height:h=i,o.width>=r.innerWidth?u=0:e+o.width>=r.innerWidth?e>=o.width?u=r.innerWidth-e:l=r.innerWidth-o.width:l=e;this.fullscreen=o.height>=r.innerHeight-ze(4)||o.width===r.innerWidth}else h=0,l=0;this.style.top=h===h?h+"px":"",this.style.bottom=d===d?d+"px":"",this.style.left=l===l?l+"px":"",this.style.right=u===u?u+"px":"",this.focus()}}E(te);let F,re=!1,me=n=>{F&&f(t=>{Ze(t.body)}),n===!1||n===!0?F=void 0:n&&(F=n),f(t=>{g(t.body,F)}),re||($.on("documentAdded",t=>{g(t.data.body,F)}),re=!0)},g=(n,t)=>{if(n["@chocolatelibui/contextmenu"])console.warn("Context menu already attached to node",n);else{if(t){var e=i=>{i.preventDefault(),i.stopPropagation(),Xe(t,n,i.clientX,i.clientY)};n.addEventListener("contextmenu",e)}else{var e=s=>{s.preventDefault(),s.stopPropagation()};n.addEventListener("contextmenu",e)}n["@chocolatelibui/contextmenu"]=e}},Ze=n=>{n["@chocolatelibui/contextmenu"]?(n.removeEventListener("contextmenu",n["@chocolatelibui/contextmenu"]),delete n["@chocolatelibui/contextmenu"]):console.warn("No context menu registered with node",n)},Xe=async(n,t,e,i,s)=>{let o=t?t.ownerDocument["@chocolatelibui/contextmenu"]:R["@chocolatelibui/contextmenu"];if(typeof e!="number"||typeof i!="number")if(t){let r=t.getBoundingClientRect();e=r.left+r.width/2,i=r.top+r.height/2}else e=0,i=0;o.attachMenu(new te(n)).setPosition(e,i,s?t:void 0)};class V extends M{static elementName(){return"devider"}focus(t){this.focusNext(t)}}E(V);let W=async n=>{let t=typeof n=="function"?n():n;if(t instanceof Promise){let e=await t;return W(e)}else{let e=[];for(let i=0;i<t.length;i++){let s=t[i],o=typeof s=="function"?s():s;typeof o=="number"?e.push(new V):o instanceof M?e.push(o):o.action?e.push(new a(o.text,o.action,o.icon,o.shortcut,o.checkmark)):o.lines?e.push(new x(o.text,W(o.lines),o.icon)):console.warn("Invalid option passed, missing either action or lines option",s)}return e}};document.body.appendChild(document.createElement("button")).onclick=()=>{C.set="light"};document.body.appendChild(document.createElement("button")).onclick=()=>{C.set="dark"};let pe=document.body.appendChild(document.createElement("button"));pe.innerHTML="Open Window";pe.onclick=()=>{let n=window.open("","","popup");Te(n.document,!0),n==null||n.addEventListener("unload",()=>{Se(n.document)})};let fe=document.body.appendChild(document.createElement("div"));fe.innerHTML="Big Menu";let _e=document.body.appendChild(document.createElement("div"));_e.innerHTML="Empty Menu";let we=document.body.appendChild(document.createElement("div"));we.innerHTML="Single Devider";let ve=document.body.appendChild(document.createElement("div"));ve.innerHTML="Async Menu";let ge=document.body.appendChild(document.createElement("div"));ge.innerHTML="Generator Function";let be=document.body.appendChild(document.createElement("div"));be.innerHTML="Generator Function Mix";let xe=document.body.appendChild(document.createElement("div"));xe.innerHTML="Generator Function Async";let Le=[new a("Text for option 1",()=>{console.warn("1")}),new a("Text for option 2",()=>{console.warn("2")},v()),new a("Text for option 3",()=>{console.warn("3")},v(),"Shift + K"),new a("Text for option 4",()=>{console.warn("4")},v(),void 0,!0),new x("Text for sub 1",[new a("Text for option 1",()=>{console.warn("1_1")}),new a("Text for option 2",()=>{console.warn("1_2")},v()),new a("Text for option 3",()=>{console.warn("1_3")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("1_4")}),new x("Text for sub 1",[new a("Text for option 1",()=>{console.warn("1_1_1")}),new a("Text for option 2",()=>{console.warn("1_1_2")},v()),new a("Text for option 3",()=>{console.warn("1_1_3")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("1_1_4")})])]),new a("Text for option 5",()=>{console.warn("5")},v(),"Ctrl + G",!0),new a("Text for option 6",()=>{console.warn("6")},void 0,"Shift + K"),new a("Text for option 7",()=>{console.warn("7")},void 0,void 0,!0),new a("Text for option 8",()=>{console.warn("8")},void 0,"Ctrl + G",!0),new a("Text for option 9 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("9")}),new a("Text for option 10 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("10")},v()),new a("Text for option 11 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("11")},void 0,"Shift + K"),new a("Text for option 12 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("12")},void 0,void 0,!0),new V,new a("Text for option 13",()=>{console.warn("13")}),new a("Text for option 14",()=>{console.warn("14")}),new x("Text for sub 1",[new a("Text for option 1",()=>{console.warn("YOYO")}),new a("Text for option 2",()=>{console.warn("YOYO")},v()),new a("Text for option 3",()=>{console.warn("YOYO")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("YOYO")})]),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")}),new x("Text for sub 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",[new a("Text for option 1",()=>{console.warn("YOYO")}),new a("Text for option 2",()=>{console.warn("YOYO")},v()),new a("Text for option 3",()=>{console.warn("YOYO")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("YOYO")})]),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")})],et=[],ne=[new V];me([]);me(Le);g(fe,Le);g(_e,et);g(we,ne);g(ve,async()=>(await new Promise(n=>{setTimeout(n,1e3)}),[new a("Test1",()=>{}),new a("Text for option 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{}),new a("Test3",()=>{}),new a("Test4",()=>{}),new x("Text for sub 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",async()=>(await new Promise(n=>{setTimeout(n,2e3)}),[new a("Test1",()=>{}),new a("Text for option 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{}),new a("Test3",()=>{}),new a("Test4",()=>{})]))]));g(ge,W([{text:"Test 1",action(){console.warn("Test1")}},0,{text:"SubMenu 1",lines:[{text:"Test 1_1",action(){console.warn("Test1_1")}}]}]));g(be,ne);g(xe,ne);
