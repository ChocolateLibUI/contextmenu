var be=Object.defineProperty;var Le=(i,t,e)=>t in i?be(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var l=(i,t,e)=>(Le(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class ye{constructor(t,e,n){l(this,"type");l(this,"target");l(this,"data");this.type=t,this.target=e,this.data=n}}class Ee{constructor(){l(this,"target");l(this,"eventHandler_ListenerStorage",{})}on(t,e){let n=this.eventHandler_ListenerStorage[t];return n?n.indexOf(e)==-1?n.push(e):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[t]=[e],e}once(t,e){return this.on(t,function(n){return e(n),!0}),e}off(t,e){let n=this.eventHandler_ListenerStorage[t];if(n){let s=n.indexOf(e);s!=-1?n.splice(s,1):console.warn("Listener not in handler")}return e}emit(t,e){let n=this.eventHandler_ListenerStorage[t];if(n&&n.length>0){let s=Object.freeze(new ye(t,this.target||this,e));n.length>1&&(n=[...n]);for(let o=0,r=n.length;o<r;o++)try{n[o](s)&&(n.splice(o,1),r--,o--)}catch(h){console.warn("Failed while dispatching event",h)}}}clear(t){this.eventHandler_ListenerStorage[t]=[]}inUse(t){var e;return Boolean((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)}has(t,e){var n;return Boolean(((n=this.eventHandler_ListenerStorage[t])==null?void 0:n.indexOf(e))!==-1)}amount(t){var e;return((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)||0}get eventsUserOnly(){return this}}let A=new Ee,O=A.eventsUserOnly,y=[document],R=document;A.target={documents:y,mainDocument:R};let f=i=>{for(let t=0;t<y.length;t++)i(y[t])},Ce=(i,t)=>{if(y.includes(i))console.warn("Document registered twice");else{if(y.push(i),t){let e=R.head.children;for(let n=0;n<e.length;n++)switch(e[n].nodeName){case"LINK":if(e[n].rel!=="stylesheet")break;case"STYLE":i.head.appendChild(e[n].cloneNode(!0));break}}A.emit("documentAdded",i)}},Te=i=>{let t=y.indexOf(i);t!=-1?(y.splice(t,1),A.emit("documentRemoved",i)):console.warn("Document not registered")};let ie=(i,t)=>{var n;let e=new TextEncoder().encode(i);return i=new TextDecoder().decode(e.slice(0,t)),((n=i.at(-1))==null?void 0:n.charCodeAt(0))===65533?i.slice(0,-1):i};class B{constructor(t){l(this,"___valueListeners",[]);l(this,"___value");l(this,"info");this.___value=t}addListener(t,e){if(this.___valueListeners.push(t),e){let n=this.get;n instanceof Promise?n.then(t):t(n)}return t}removeListener(t){let e=this.___valueListeners.indexOf(t);return e!=-1&&this.___valueListeners.splice(e,1),t}get get(){return this.___value}set set(t){this.___value!==t&&(this.___value=t,this.___update())}___update(){if(this.___valueListeners)for(let t=0,e=this.___valueListeners.length;t<e;t++)try{this.___valueListeners[t](this.___value)}catch(n){console.warn("Failed while calling value listeners ",n)}}compare(t){let e=this.get;return e instanceof Promise?e.then(n=>t!==n):t!==e}get inUse(){return this.___valueListeners.length!==0}hasListener(t){return this.___valueListeners.indexOf(t)!==-1}toJSON(){return this.___value}}class ae extends B{constructor(e,n){super(e);l(this,"___limiters");l(this,"___limitersListeners",[]);this.___limiters=n}addLimiterListener(e,n){return this.___limitersListeners.push(e),n&&e(this),e}removeLimiterListener(e){let n=this.___limitersListeners.indexOf(e);return n!=-1&&this.___limitersListeners.splice(n,1),e}___updateLimiter(){if(this.___limitersListeners)for(let e=0,n=this.___limitersListeners.length;e<n;e++)try{this.___limitersListeners[e](this)}catch(s){console.warn("Failed while calling value listeners ",s)}}get limiters(){return this.___limiters}set limiters(e){e?this.___limiters=e:delete this.___limiters,this.___updateLimiter()}checkLimit(e){if(this.___limiters){for(let n=0;n<this.___limiters.length;n++)if(this.___limiters[n].func(e))return!1}return!0}checkLimitReason(e){if(this.___limiters){for(let n=0;n<this.___limiters.length;n++)if(this.___limiters[n].func(e))switch(typeof this.___limiters[n].reason){case"string":return this.___limiters[n].reason;case"function":return this.___limiters[n].reason(e)}}return!0}set set(e){e===this.___value||!this.checkLimit(e)||(this.___value=e,this.___update())}}class z extends ae{constructor(e,n=-1/0,s=1/0,o,r){super(e,r);l(this,"_min");l(this,"_max");l(this,"_step");l(this,"halfStep",0);this._min=n,this._max=s,o&&(this._step=o,this.halfStep=o/2)}get min(){return this._min}set min(e){this._min=e;let n=Math.max(this._min,this.___value);this.___value!==n&&(this.___value=n,this.___update()),this.___updateLimiter()}get max(){return this._max}set max(e){this._max=e;let n=Math.min(this._max,this.___value);this.___value!==n&&(this.___value=n,this.___update()),this.___updateLimiter()}get step(){return this._step}set step(e){if(e){this._step=e,this.halfStep=e/2;let n=this.___value%this._step,s=n>this.halfStep?this.___value+(this._step-n):this.___value-n;s!==this.___value&&(this.___value=s,this.___update())}else delete this._step,this.halfStep=0;this.___updateLimiter()}set set(e){if(this._step){let n=e%this._step;e=n>this.halfStep?e+(this._step-n):e-n}e=Math.min(this._max,Math.max(this._min,e)),e!==this.___value&&this.checkLimit(e)&&(this.___value=e,this.___update())}}class H extends ae{constructor(e,n,s,o,r){super(e,r);l(this,"_maxLength");l(this,"_maxByteLength");l(this,"___enums");this._maxLength=s,this._maxByteLength=o,this.___enums=n}get enums(){return this.___enums}set enums(e){if(e){if(this.___enums=e,!this.checkEnum(this.___value))for(const n in this.___enums){this.___value=n,this.___update();return}}else delete this.___enums;this.___updateLimiter()}get enum(){if(this.___enums)return this.___enums[this.___value]}checkEnum(e){return!this.___enums||e in this.___enums}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e,this._maxLength&&this.___value.length>this._maxLength&&(this.___value=this.___value.slice(0,this._maxLength),this.___update()),this.___updateLimiter()}get maxByteLength(){return this._maxByteLength}set maxByteLength(e){if(this._maxByteLength=e,this._maxByteLength){let n=ie(this.___value,this._maxByteLength);this.___value!==n&&(this.___value=n,this.___update())}this.___updateLimiter()}set set(e){this._maxLength&&e.length>this._maxLength&&(e=e.slice(0,this._maxLength)),this._maxByteLength&&(e=ie(e,this._maxByteLength)),e!==this.___value&&this.checkLimit(e)&&this.checkEnum(e)&&(this.___value=e,this.___update())}}class Se{constructor(t,e,n){l(this,"type");l(this,"target");l(this,"data");this.type=t,this.target=e,this.data=n}}class Fe{constructor(){l(this,"target");l(this,"eventHandler_ListenerStorage",{})}on(t,e){let n=this.eventHandler_ListenerStorage[t];return n?n.indexOf(e)==-1?n.push(e):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[t]=[e],e}once(t,e){return this.on(t,function(n){return e(n),!0}),e}off(t,e){let n=this.eventHandler_ListenerStorage[t];if(n){let s=n.indexOf(e);return s!=-1?n.splice(s,1):console.warn("Listener not in handler"),e}}emit(t,e){let n=this.eventHandler_ListenerStorage[t];if(n&&n.length>0){let s=Object.freeze(new Se(t,this.target||this,e));n.length>1&&(n=[...n]);for(let o=0,r=n.length;o<r;o++)try{n[o](s)&&(n.splice(o,1),r--,o--)}catch(h){console.warn("Failed while dispatching event",h)}}}clear(t){this.eventHandler_ListenerStorage[t]=[]}inUse(t){var e;return Boolean((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)}has(t,e){var n;return Boolean(((n=this.eventHandler_ListenerStorage[t])==null?void 0:n.indexOf(e))!==-1)}amount(t){var e;return((e=this.eventHandler_ListenerStorage[t])==null?void 0:e.length)||0}}var ke=Object.defineProperty,De=(i,t,e)=>t in i?ke(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,x=(i,t,e)=>(De(i,typeof t!="symbol"?t+"":t,e),e),L=(i=>(i.write="w",i.read="r",i.none="n",i))(L||{});const Oe={w:{name:"Write",description:"Write access to element"},r:{name:"Read",description:"Read access to element"},n:{name:"None",description:"No access to element"}};class $e extends H{constructor(t){super(t,Oe)}}class P extends HTMLElement{constructor(...t){super(),x(this,"$connectedObserver"),x(this,"isVisible",!1),x(this,"events",new Fe),x(this,"$values"),x(this,"$valueFuncs"),x(this,"$valueConnector"),x(this,"$access",L.write),x(this,"$accessListener"),this.events.target=this}static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-core"}connectedCallback(){this.$connectedObserver?this.$connectedObserver.observe(this):(this.events.emit("connect",0),this.isVisible=!0)}disconnectedCallback(){this.$connectedObserver?(this.$connectedObserver.unobserve(this),this.isVisible&&(this.events.emit("connect",1),this.isVisible=!1)):(this.events.emit("connect",1),this.isVisible=!1)}adoptedCallback(){this.events.emit("connect",2)}options(t){return this.access=t.access,this}attachToObserver(t){t?(this.$connectedObserver=t,this.isConnected&&t.observe(this)):this.$connectedObserver&&(this.isConnected&&this.$connectedObserver.unobserve(this),this.isVisible||(this.events.emit("connect",0),this.isVisible=!0),delete this.$connectedObserver)}attachValue(t,e){if(this.$valueFuncs){if(this.$valueFuncs.includes(e))throw"Function is already attached to this element"}else this.$values=[],this.$valueFuncs=[];return this.$valueConnector?this.isVisible&&t.addListener(e):this.$valueConnector=this.events.on("connect",n=>{switch(n.data){case 0:for(let s=0;s<this.$values.length;s++)this.$values[s].addListener(this.$valueFuncs[s],!0);break;case 1:for(let s=0;s<this.$values.length;s++)this.$values[s].removeListener(this.$valueFuncs[s]);break;case 2:for(let s=0;s<this.$values.length;s++)this.$values[s].removeListener(this.$valueFuncs[s]),this.$values[s].addListener(this.$valueFuncs[s],!0)}}),this.$valueFuncs.push(e),this.$values.push(t),e}dettachValue(t){if(this.$valueFuncs){let e=this.$valueFuncs.indexOf(t);e>-1&&(this.isVisible&&this.$values[e].removeListener(t),this.$values.splice(e,1),this.$valueFuncs.splice(e,1),this.$valueFuncs.length===0&&this.events.off("connect",this.$valueConnector))}}get access(){return this.$access}set access(t){this.$accessListener&&(this.dettachValue(this.$accessListener),delete this.$accessListener),typeof t=="object"&&t instanceof $e?this.$accessListener=this.attachValue(t,e=>{this.$accessChange(e),this.$access=e}):t?(this.$accessChange(t),this.$access=t):(this.$accessChange(L.write),this.$access=L.write)}$accessChange(t){switch(t){case L.write:this.inert=!1;break;case L.read:this.inert=!0;break;case L.none:this.setAttribute("inert","none");break}}}const Ne=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var Me=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;let Be=i=>i?/[A-Z]/.test(i)?"Custom element names must not contain uppercase ASCII characters.":i.includes("-")?/^\d/i.test(i)?"Custom element names must not start with a digit.":/^-/i.test(i)?"Custom element names must not start with a hyphen.":Me.test(i)?Ne.has(i)?`The supplied element name is reserved and can't be used.
See: https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name`:"Unknown fault":"Invalid element name.":"Custom element names must contain a hyphen. Example: unicorn-cake":"Missing element name.",E=i=>{let t=i.elementNameSpace(),e=i.elementName,n="",s=i;for(;s!==HTMLElement&&t===s.elementNameSpace();){let o=s.elementName();if(s=Object.getPrototypeOf(s),e===s.elementName)throw new Error("Element uses same name as ancestor, abstract classes should return '@abstract@'");if(!o.length)throw new Error("Element doesn't define element name");o!=="@abstract@"&&(n="-"+o+n)}n=t+n;try{customElements.define(n,i)}catch(o){throw o.message.includes("has already been used with this registry")?o:new Error(Be(n)+" "+n)}};class U extends P{constructor(){super();l(this,"activeElementBuffer");this.tabIndex=-1;let e=n=>{n.preventDefault(),n.stopPropagation()};this.oncontextmenu=e,this.onpointerdown=e,this.onpointerup=e,this.onpointercancel=e,this.onpointerenter=e,this.onpointerleave=e,this.onpointermove=e,this.onpointerout=e,this.onpointerout=e,this.onclick=e}static elementName(){return"container"}static elementNameSpace(){return"chocolatelibui-contextmenu"}get zIndex(){return parseInt(this.style.zIndex)}set zIndex(e){this.style.zIndex=String(e)}attachMenu(e){return this.activeElementBuffer=this.ownerDocument.activeElement,this.replaceChildren(e),e}closeUp(e){this.activeElementBuffer?(this.activeElementBuffer.focus(),this.ownerDocument.activeElement!==this.activeElementBuffer&&this.focus(),this.activeElementBuffer=void 0):this.focus(),this.removeChild(e)}}E(U);O.on("documentAdded",i=>{i.data["@chocolatelibui/contextmenu"]=i.data.documentElement.appendChild(new U)});f(i=>{i["@chocolatelibui/contextmenu"]=i.documentElement.appendChild(new U)});let se={50:"#E3F2FD",100:"#BBDEFB",200:"#90CAF9",300:"#64B5F6",400:"#42A5F5",500:"#2196F3",600:"#1E88E5",700:"#1976D2",800:"#1565C0",900:"#0D47A1"},v={50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",900:"#212121"};var He=Object.defineProperty,Ie=(i,t,e)=>t in i?He(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,T=(i,t,e)=>(Ie(i,typeof t!="symbol"?t+"":t,e),e);let oe={},Ae=(i,t,e)=>(oe[i]=new J(i,t,e),oe[i]);class J{constructor(t,e,n){T(this,"pathID"),T(this,"settings",{}),T(this,"subGroups",{}),T(this,"name"),T(this,"description"),this.pathID=t,this.name=e,this.description=n}makeSubGroup(t,e,n){if(t in this.subGroups){console.warn("Sub group already registered "+t);return}else return this.subGroups[t]=new J(this.pathID+"/"+t,e,n)}makeBooleanSetting(t,e,n,s){if(t in this.settings)throw new Error("Settings already registered "+t);let o=localStorage[this.pathID+"/"+t];if(o)var r=new B(JSON.parse(o));else if(typeof s=="boolean")var r=new B(s);else{var r=new B(!1);s.then(d=>{r.set=d})}return r.info={name:e,description:n},r.addListener(h=>{localStorage[this.pathID+"/"+t]=JSON.stringify(h)},!o),this.settings[t]=r}makeNumberSetting(t,e,n,s,o,r,h,d){if(t in this.settings)throw new Error("Settings already registered "+t);let c=localStorage[this.pathID+"/"+t];if(c)var u=new z(JSON.parse(c),o,r,h,d);else if(typeof s=="number")var u=new z(s,o,r,h,d);else{var u=new z(NaN,o,r,h,d);s.then(Y=>{u.set=Y})}return u.info={name:e,description:n},u.addListener(m=>{localStorage[this.pathID+"/"+t]=JSON.stringify(m)},!c),this.settings[t]=u}makeStringSetting(t,e,n,s,o,r,h,d){if(t in this.settings)throw new Error("Settings already registered "+t);let c=localStorage[this.pathID+"/"+t];if(c)var u=new H(JSON.parse(c),o,r,h,d);else if(typeof s=="string")var u=new H(s,o,r,h,d);else{var u=new H("",o,r,h,d);s.then(Y=>{u.set=Y})}return u.info={name:e,description:n},u.addListener(m=>{localStorage[this.pathID+"/"+t]=JSON.stringify(m)},!c),this.settings[t]=u}}var Pe=Object.defineProperty,Ue=(i,t,e)=>t in i?Pe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,S=(i,t,e)=>(Ue(i,typeof t!="symbol"?t+"":t,e),e);const Ve="@chocolatelibui/theme";let $=Ae(Ve,"Theme/UI","Settings for UI elements and and color themes"),I={},Ye={light:{name:"Light",description:"Don't set touch mode automatically"},dark:{name:"Dark",description:"Change touch mode on first ui interaction"}},C=$.makeStringSetting("theme","Theme","Color theme of UI",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Ye),ze=$.makeBooleanSetting("autoTheme","Automatic Theme Change","Toggle for automatically changing theme",!0),le=(i,t,e)=>(I[i]=new K(i,t,e),I[i]);class K{constructor(t,e,n){S(this,"pathID"),S(this,"variables",{}),S(this,"subGroups",{}),S(this,"name"),S(this,"description"),this.pathID=t,this.name=e,this.description=n}makeSubGroup(t,e,n){if(t in this.subGroups)throw new Error("Sub group already registered "+t);return this.subGroups[t]=new K(this.pathID+"/"+t,e,n)}makeVariable(t,e,n,s,o,r,h){if(t in this.variables)throw new Error("Settings already registered "+t);let d="--"+this.pathID+"/"+t,c=this.variables[d]={name:e,desc:n,vars:{light:s,dark:o}};f(u=>{u.documentElement.style.setProperty(d,c.vars[C.get])})}applyThemes(t,e){for(const n in this.variables)t.setProperty(n,this.variables[n].vars[e]);for(const n in this.subGroups)this.subGroups[n].applyThemes(t,e)}}let Q=(i,t)=>{for(const e in I)I[e].applyThemes(i.documentElement.style,t)};C.addListener(i=>{f(t=>{Q(t,i)})});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{ze.get&&(C.set=i.matches?"dark":"light")});O.on("documentAdded",i=>{Q(i.data,C.get)});f(i=>{Q(i,C.get)});let qe={off:{name:"Off",description:"Don't set touch mode automatically"},first:{name:"First Interaction",description:"Change touch mode on first ui interaction"},every:{name:"Every Interaction",description:"Change touch mode on every ui interaction"}},k=$.makeBooleanSetting("touch","Touch Mode","Toggle between touch friendly or mouse friendly UI",!1),j=$.makeStringSetting("autoTouch","Automatic Touch Mode","Mode for automatically changing touch mode","every",qe);k.addListener(i=>{f(t=>{X(t,i)})});j.addListener(i=>{f(t=>{Z(t,i)})});let X=(i,t)=>{t?i.documentElement.classList.add("touch"):i.documentElement.classList.remove("touch")},q=i=>{switch(i.pointerType){case"touch":k.set=!0;break;case"mouse":case"pen":default:k.set=!1;break}},G=i=>{q(i),f(t=>{t.documentElement.removeEventListener("pointerdown",G)})},Z=(i,t)=>{switch(i.documentElement.removeEventListener("pointerdown",G),i.documentElement.removeEventListener("pointerdown",q),t){case"first":i.documentElement.addEventListener("pointerdown",G,{passive:!0});break;case"every":i.documentElement.addEventListener("pointerdown",q,{passive:!0});break}};O.on("documentAdded",i=>{X(i.data,k.get),Z(i.data,j.get)});f(i=>{X(i,k.get),Z(i,j.get)});let Ge=$.makeNumberSetting("scale","UI Scale","The scale of the UI",1,.2,4),D=16;Ge.addListener(i=>{D=i*16,f(t=>{t.documentElement.style.fontSize=D+"px"})});O.on("documentAdded",i=>{i.data.documentElement.style.fontSize=D+"px"});f(i=>{i.documentElement.style.fontSize=D+"px"});let We=i=>i*D;const Re="@chocolatelibui/contextmenu";let N=le(Re,"Context Menu","Right click or touch and hold context menu appearance");N.makeVariable("background","Background Color","Color of background",v[50],v[900],"Color",void 0);N.makeVariable("text","Text Color","Color of text",v[600],v[400],"Color",void 0);N.makeVariable("hover","Hover Color","Background color of line when hovering over it",se[200],se[900],"Color",void 0);N.makeVariable("hoverText","Text Color","Standard text color",v[900],v[50],"Color",void 0);N.makeVariable("border","Border Color","Color of border and deviders",v[300],v[800],"Color",void 0);let ee=(i,t)=>{let e;return function(){return e||(e=new DOMParser().parseFromString(t,"image/svg+xml").firstChild,e.setAttribute("icon",i)),e.cloneNode(!0)}},w=ee("material_content_text_format_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z"/></svg>'),Je=ee("material_navigation_chevron_right_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"/></svg>'),Ke=ee("material_navigation_close_rounded",'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>');class M extends P{static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-contextmenu"}focusNext(t){var e,n,s,o;t?this.previousElementSibling?this.previousElementSibling.focus({}):((e=this.parentElement)==null?void 0:e.lastElementChild)!==this&&((n=this.parentElement)==null?void 0:n.lastElementChild).focus({}):this.nextElementSibling?this.nextElementSibling.focus():((s=this.parentElement)==null?void 0:s.firstElementChild)!==this&&((o=this.parentElement)==null?void 0:o.firstElementChild).focus()}}class a extends M{constructor(e,n,s,o,r){super();l(this,"func");this.func=n,this.tabIndex=0;let h=this.appendChild(document.createElement("div"));h.className="icon",s&&h.appendChild(s);let d=this.appendChild(document.createElement("div"));d.innerHTML=e,d.className="text";let c=this.appendChild(document.createElement("div"));o&&(c.innerHTML=o),c.className="shortcut";let u=this.appendChild(document.createElement("div"));r&&(u.innerHTML="\u2713"),u.className="checkmark",this.onclick=m=>{m.stopPropagation(),this.func(),navigator==null||navigator.vibrate(25),this.parentElement.closeUp()},this.onkeydown=m=>{switch(m.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(m.shiftKey||m.code==="ArrowUp");break;case"Enter":case"Space":this.func(),this.parentElement.closeUp();break;case"ArrowLeft":case"Escape":return}m.preventDefault(),m.stopPropagation()}}static elementName(){return"option"}}E(a);let Qe="http://www.w3.org/2000/svg",_=(i,t,e)=>{let n=document.createElementNS(Qe,"circle");return n.setAttribute("cx",String(i)),n.setAttribute("cy",String(t)),n.setAttribute("r",String(e)),n};const je="@chocolatelibui/spinner";let Xe=le(je,"Spinner","Spinner used as a placeholder for data with and unknown arrival time");Xe.makeVariable("color","Dot color","Color of dots in spinner",v[700],v[300],"Color",void 0);let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 64 64");p.appendChild(_(32,6,0));p.appendChild(_(45,9.483,0));p.appendChild(_(54.516,19,0));p.appendChild(_(58,32,0));p.appendChild(_(54.516,45,0));p.appendChild(_(45,54.516,0));p.appendChild(_(32,58,0));p.appendChild(_(19,54.516,0));p.appendChild(_(9.483,45,0));p.appendChild(_(6,32,0));p.appendChild(_(9.483,19,0));p.appendChild(_(19,9.483,0));class ce extends P{static elementName(){return"dots"}static elementNameSpace(){return"chocolatelibui-spinner"}constructor(){super(),this.appendChild(p.cloneNode(!0))}}E(ce);class he extends M{static elementName(){return"buffer"}constructor(){super(),this.appendChild(new ce)}focus(t){this.focusNext(t)}}E(he);class b extends M{constructor(e,n,s){super();l(this,"menu");l(this,"isOpen");l(this,"hoverTime");l(this,"blockTime");this.menu=new te(n),this.tabIndex=0;let o=this.appendChild(document.createElement("div"));o.className="icon",s&&o.appendChild(s);let r=this.appendChild(document.createElement("div"));r.innerHTML=e,r.className="text";let h=this.appendChild(document.createElement("div"));h.className="shortcut";let d=this.appendChild(document.createElement("div"));d.appendChild(Je()),d.className="chevron",this.onclick=c=>{c.stopPropagation(),this.blockTime||(navigator==null||navigator.vibrate(25),this.isOpen?this.closeDown():this.open())},this.onpointerenter=c=>{c.pointerType!=="touch"&&!this.isOpen&&(this.hoverTime=setTimeout(()=>{this.open(),this.blockTime=setTimeout(()=>{this.blockTime=0},500)},300))},this.onpointerleave=()=>{clearTimeout(this.hoverTime)},this.onkeydown=c=>{switch(c.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(c.shiftKey||c.code==="ArrowUp");break;case"ArrowRight":case"Enter":case"Space":this.open(),this.menu.focusNext(!1);break;case"ArrowLeft":case"Escape":return}c.preventDefault(),c.stopPropagation()}}static elementName(){return"submenu"}open(){this.parentElement.submenu&&this.parentElement.submenu.closeDown(),this.parentElement.submenu=this,this.appendChild(this.menu),this.menu.setPosition(0,0,this),this.isOpen=!0}close(){this.focus(),this.parentElement.submenu=void 0,this.removeChild(this.menu),this.isOpen=!1}closeDown(){this.menu.closeDown(),this.close()}closeUp(){this.close(),this.parentElement.closeUp()}}E(b);class te extends P{constructor(e){super();l(this,"submenu");l(this,"closer");l(this,"x");l(this,"y");l(this,"element");let n=typeof e=="function"?e():e;if(n instanceof Promise){let s=this.appendChild(new he);n.then(o=>{s.remove(),this.lines=o,this.setPosition(this.x,this.y,this.element)})}else this.lines=n;this.tabIndex=0,this.onblur=s=>{s.preventDefault(),s.stopPropagation(),s.relatedTarget||this.closeUp()},this.onscroll=()=>{this.closeDown()},this.onkeydown=s=>{switch(s.code){case"Tab":case"ArrowUp":case"ArrowDown":this.focusNext(s.shiftKey||s.code==="ArrowUp");break;case"ArrowLeft":this.parentElement instanceof U||(this.parentElement.focus(),this.parentElement.closeDown());break;case"Escape":this.closeUp();break}s.preventDefault(),s.stopPropagation()}}static elementName(){return"menu"}static elementNameSpace(){return"chocolatelibui-contextmenu"}set lines(e){this.replaceChildren(),this.closer&&this.appendChild(this.closer);for(let n=0;n<e.length;n++){let s=e[n],o=typeof s=="function"?s():s;this.appendChild(o)}}focusNext(e){var n,s;e?(n=this.lastChild)==null||n.focus():(s=this.firstChild)==null||s.focus({})}get fullscreen(){return Boolean(this.closer)}set fullscreen(e){e?(this.classList.add("fullscreen"),this.closer||(this.closer=new a("Close",()=>{},Ke()),this.closer.onclick=n=>{n.stopPropagation(),this.parentElement instanceof b?this.parentElement.closeDown():this.closeUp()},this.prepend(this.closer))):(this.classList.remove("fullscreen"),this.closer&&(this.closer.remove(),delete this.closer))}closeDown(){this.submenu&&this.submenu.closeDown(),this.submenu=void 0}closeUp(){this.closeDown(),this.parentElement.closeUp(this)}setPosition(e=0,n=0,s){this.x=e,this.y=n,this.element=s;let o=this.getBoundingClientRect(),r=this.ownerDocument.defaultView,h=NaN,d=NaN,c=NaN,u=NaN;if(r){if(s){var m=s.getBoundingClientRect();m.x+m.width+o.width>r.innerWidth?(e=m.x,o.width<e?u=r.innerWidth-e:u=r.innerWidth-(m.x+m.width)):e=m.x+m.width,n=m.y+m.height,n+o.height>=r.innerHeight?n>=o.height?d=r.innerHeight-m.y:h=r.innerHeight-o.height:h=n}else n+o.height>=r.innerHeight?n>=o.height?d=r.innerHeight-n:h=r.innerHeight-o.height:h=n,o.width>=r.innerWidth?u=0:e+o.width>=r.innerWidth?e>=o.width?u=r.innerWidth-e:c=r.innerWidth-o.width:c=e;this.fullscreen=o.height>=r.innerHeight-We(4)||o.width===r.innerWidth}else h=0,c=0;this.style.top=h===h?h+"px":"",this.style.bottom=d===d?d+"px":"",this.style.left=c===c?c+"px":"",this.style.right=u===u?u+"px":"",this.focus()}}E(te);let F,re=!1,ue=i=>{F&&f(t=>{Ze(t.body)}),i===!1||i===!0?F=void 0:i&&(F=i),f(t=>{g(t.body,F)}),re||(O.on("documentAdded",t=>{g(t.data.body,F)}),re=!0)},g=(i,t)=>{if(i["@chocolatelibui/contextmenu"])console.warn("Context menu already attached to node",i);else{if(t){var e=n=>{n.preventDefault(),n.stopPropagation(),et(t,i,n.clientX,n.clientY)};i.addEventListener("contextmenu",e)}else{var e=s=>{s.preventDefault(),s.stopPropagation()};i.addEventListener("contextmenu",e)}i["@chocolatelibui/contextmenu"]=e}},Ze=i=>{i["@chocolatelibui/contextmenu"]?(i.removeEventListener("contextmenu",i["@chocolatelibui/contextmenu"]),delete i["@chocolatelibui/contextmenu"]):console.warn("No context menu registered with node",i)},et=async(i,t,e,n,s)=>{let o=t?t.ownerDocument["@chocolatelibui/contextmenu"]:R["@chocolatelibui/contextmenu"];if(typeof e!="number"||typeof n!="number")if(t){let r=t.getBoundingClientRect();e=r.left+r.width/2,n=r.top+r.height/2}else e=0,n=0;o.attachMenu(new te(i)).setPosition(e,n,s?t:void 0)};class V extends M{static elementName(){return"devider"}focus(t){this.focusNext(t)}}E(V);let W=async i=>{let t=typeof i=="function"?i():i;if(t instanceof Promise){let e=await t;return W(e)}else{let e=[];for(let n=0;n<t.length;n++){let s=t[n],o=typeof s=="function"?s():s;typeof o=="number"?e.push(new V):o instanceof M?e.push(o):o.action?e.push(new a(o.text,o.action,o.icon,o.shortcut,o.checkmark)):o.lines?e.push(new b(o.text,W(o.lines),o.icon)):console.warn("Invalid option passed, missing either action or lines option",s)}return e}};document.body.appendChild(document.createElement("button")).onclick=()=>{C.set="light"};document.body.appendChild(document.createElement("button")).onclick=()=>{C.set="dark"};let de=document.body.appendChild(document.createElement("button"));de.innerHTML="Open Window";de.onclick=()=>{let i=window.open("","","popup");Ce(i.document,!0),i==null||i.addEventListener("unload",()=>{Te(i.document)})};let me=document.body.appendChild(document.createElement("div"));me.innerHTML="Big Menu";let pe=document.body.appendChild(document.createElement("div"));pe.innerHTML="Empty Menu";let fe=document.body.appendChild(document.createElement("div"));fe.innerHTML="Single Devider";let _e=document.body.appendChild(document.createElement("div"));_e.innerHTML="Async Menu";let ve=document.body.appendChild(document.createElement("div"));ve.innerHTML="Generator Function";let we=document.body.appendChild(document.createElement("div"));we.innerHTML="Generator Function Mix";let ge=document.body.appendChild(document.createElement("div"));ge.innerHTML="Generator Function Async";let xe=[new a("Text for option 1",()=>{console.warn("1")}),new a("Text for option 2",()=>{console.warn("2")},w()),new a("Text for option 3",()=>{console.warn("3")},w(),"Shift + K"),new a("Text for option 4",()=>{console.warn("4")},w(),void 0,!0),new b("Text for sub 1",[new a("Text for option 1",()=>{console.warn("1_1")}),new a("Text for option 2",()=>{console.warn("1_2")},w()),new a("Text for option 3",()=>{console.warn("1_3")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("1_4")}),new b("Text for sub 1",[new a("Text for option 1",()=>{console.warn("1_1_1")}),new a("Text for option 2",()=>{console.warn("1_1_2")},w()),new a("Text for option 3",()=>{console.warn("1_1_3")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("1_1_4")})])]),new a("Text for option 5",()=>{console.warn("5")},w(),"Ctrl + G",!0),new a("Text for option 6",()=>{console.warn("6")},void 0,"Shift + K"),new a("Text for option 7",()=>{console.warn("7")},void 0,void 0,!0),new a("Text for option 8",()=>{console.warn("8")},void 0,"Ctrl + G",!0),new a("Text for option 9 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("9")}),new a("Text for option 10 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("10")},w()),new a("Text for option 11 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("11")},void 0,"Shift + K"),new a("Text for option 12 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{console.warn("12")},void 0,void 0,!0),new V,new a("Text for option 13",()=>{console.warn("13")}),new a("Text for option 14",()=>{console.warn("14")}),new b("Text for sub 1",[new a("Text for option 1",()=>{console.warn("YOYO")}),new a("Text for option 2",()=>{console.warn("YOYO")},w()),new a("Text for option 3",()=>{console.warn("YOYO")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("YOYO")})]),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")}),new b("Text for sub 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",[new a("Text for option 1",()=>{console.warn("YOYO")}),new a("Text for option 2",()=>{console.warn("YOYO")},w()),new a("Text for option 3",()=>{console.warn("YOYO")},void 0,"Test"),new a("Text for option 4",()=>{console.warn("YOYO")})]),new a("Text for option 4",()=>{console.warn("YOYO")}),new a("Text for option 4",()=>{console.warn("YOYO")})],tt=[],ne=[new V];ue([]);ue(xe);g(me,xe);g(pe,tt);g(fe,ne);g(_e,async()=>(await new Promise(i=>{setTimeout(i,1e3)}),[new a("Test1",()=>{}),new a("Text for option 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{}),new a("Test3",()=>{}),new a("Test4",()=>{}),new b("Text for sub 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",async()=>(await new Promise(i=>{setTimeout(i,2e3)}),[new a("Test1",()=>{}),new a("Text for option 2 Praesent ut elementum sapien. Fusce posuere ac libero ac consequat. Quisque rhoncus tellus at orci pretium suscipit. Sed accumsan cursus.",()=>{}),new a("Test3",()=>{}),new a("Test4",()=>{})]))]));g(ve,W([{text:"Test 1",action(){console.warn("Test1")}},0,{text:"SubMenu 1",lines:[{text:"Test 1_1",action(){console.warn("Test1_1")}}]}]));g(we,ne);g(ge,ne);
